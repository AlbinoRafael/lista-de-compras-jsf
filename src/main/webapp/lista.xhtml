<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Lista de Compras</title>
    <h:outputStylesheet name="css/styles.css"/>
</h:head>
<h:body>
    <div class="header">
        <div class="logomarca">
            <span>Lista de Compras</span>
        </div>
    </div>
    <div class="main">

        <f:metadata>
            <f:event type="preRenderView" listener="#{listaBean.onload}"/>
        </f:metadata>

        <h:form id="form-cadastro-item" styleClass="form-item-container">
            <h:panelGrid id="panel-cadastro-item" columns="6" styleClass="input-container">
                <p:outputLabel value="Item:" for="input-nome-item"/>
                <h:panelGroup styleClass="input-campo-e-erro">
                    <p:inputText value="#{listaBean.item.descricao}" id="input-nome-item" maxlength="100"
                                 placeholder="digite o nome"/>
                    <p:message for="input-nome-item" style="font-size: 0.8rem"/>
                </h:panelGroup>
                <p:outputLabel value="quantidade:" for="input-quantidade-item"/>
                <h:panelGroup styleClass="input-campo-e-erro">
                    <p:inputText value="#{listaBean.item.quantidade}" id="input-quantidade-item" required="true"
                                 requiredMessage="Campo obrigatório" placeholder="0.0"
                                 converterMessage="Quantidade deve ser um valor numérico!">
                        <p:message for="input-quantidade-item" style="font-size: 0.8rem"/>
                        <f:validator validatorId="QuantidadeValidator"/>
                        <f:attribute name="quantidade-item" value="Quantidade do item"/>
                    </p:inputText>
                </h:panelGroup>
                <h:panelGroup styleClass="input-campo-e-erro">
                    <p:selectOneMenu value="#{listaBean.item.medida}" id="input-medida">
                        <f:selectItem itemValue="#{null}" itemLabel="-- selecione --"/>
                        <f:selectItems value="#{listaBean.item.medidas}" var="cat" itemValue="#{listaBean.item.medida}"
                                       itemLabel="#{listaBean.item.medida}"/>
                    </p:selectOneMenu>
                </h:panelGroup>
                <p:commandButton style="margin: 0px"
                                 value="#{'+'}"
                                 action="#{listaBean.adicionarItem}"
                                 update="form-cadastro-item, form-itens"/>
            </h:panelGrid>
        </h:form>

        <h:form id="form-itens">
            <h:panelGrid id="panel-lista-item" columns="2" styleClass="list-container">
                <h:panelGroup styleClass="lista-e-botao">
                    <p:selectManyMenu id="advanced" value="#{listaBean.itensSelecionados}"
                                      var="item" filter="true" filterMatchMode="contains" showCheckbox="true"
                                      styleClass="manymenu-advanced">
                        <f:selectItems value="#{listaBean.lista}" var="item" itemValue="#{item}"/>
                        <p:column>
                            <h:outputText value="#{item}"/>
                        </p:column>
                    </p:selectManyMenu>
                </h:panelGroup>
                <p:column headerText="Ações">
                    <p:commandButton value="-" action="#{listaBean.removerItens}"
                                     onclick="return confirm('Confirma exclusão?')" styleClass="ui-button-danger"
                                     update="advanced"/>
                </p:column>
            </h:panelGrid>
        </h:form>
        <div class="link-impressao">
            <h:form id="form-impressao">
                <h:link value="Ir para a página de Impressão" outcome="impressao"/>
            </h:form>
        </div>
    </div>
</h:body>
</html>